(this["webpackJsonpmy-quality-world"]=this["webpackJsonpmy-quality-world"]||[]).push([[0],{160:function(e,t,a){e.exports=a(250)},164:function(e,t,a){},250:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(14),i=a.n(r),c=a(31),l=(a(164),a(54)),s=a(36),m=a(13),u=a(302),d=a(295),p=a(320),h=a(18),f=a(128),g=new f.a("MyQualityWorldDb");g.version(1).stores({items:"++id"});var b=g,v=a(142),y=Object(v.a)({palette:{primary:{main:"#404b78"},secondary:{main:"#999999"}}}),E=a(324),w=a(297),x=a(81),O=a.n(x),j=Object(d.a)((function(e){return Object(E.a)({fab:{bottom:e.spacing(9),color:"white",display:"block",position:"fixed",right:e.spacing(2)}})}));function k(){var e=j();return o.a.createElement(c.b,{to:"/new",className:e.fab},o.a.createElement(w.a,{color:"primary","aria-label":"add"},o.a.createElement(O.a,null)))}var C=a(299),N=a(129),I=a.n(N),B=a(252),S=a(300),W=a(146),H=Object(d.a)((function(){return{toolbar:{justifyContent:"space-between"},siteNameLink:{color:"white",textDecoration:"none","&:hover, &:link, &:visited, &:active":{color:"white"}}}})),q=function(e){var t=e.openInfoHandler,a=H();return o.a.createElement(C.a,{position:"static",component:"header"},o.a.createElement(S.a,{className:a.toolbar},o.a.createElement(c.b,{to:"/",className:a.siteNameLink},o.a.createElement(W.a,{variant:"h6",component:"h1"},"My Quality World")),o.a.createElement(B.a,{edge:"end",color:"inherit","aria-label":"information",onClick:t},o.a.createElement(I.a,null))))},A=a(38),T=a(130),M=a.n(T),D=a(131),L=a(46),R=a(133),Y=a.n(R),F=a(134),_=a.n(F),z=a(306),X=a(303),P=a(305),U=a(304),G=a(132),V=a.n(G),Q=a(301),J=[{name:"Survival",shortName:"Survival",key:"physiology",colour:"#0277BD",description:"Basic physiological needs for food, shelter, safety and health."},{name:"Love and Belonging",shortName:"Love",key:"loveAndBelonging",colour:"#EC407A",description:"Relationships, social connections, to give and receive affection and to feel part of a group."},{name:"Power",shortName:"Power",key:"power",colour:"#263238",description:"Achievement, competence and skill, recognition. To be listened to and have a sense of worth."},{name:"Fun",shortName:"Fun",key:"fun",colour:"#FFA000",description:"To find pleasure, to play, to laugh and to learn."},{name:"Freedom",shortName:"Freedom",key:"freedom",colour:"#00C853",description:"Independence, autonomy and choice and to choose your direction in life."}],Z=Object(d.a)((function(e){return{container:{display:"flex",flexDirection:"column-reverse"},chart:{backgroundColor:e.palette.grey[200],borderRadius:"2px",height:"4px",position:"relative"},bar:{borderRadius:"2px",height:"4px",left:0,position:"absolute",top:0}}})),$=function(e){var t=e.item,a=Z(e);return o.a.createElement(Q.a,{container:!0,spacing:1},J.map((function(e){return o.a.createElement(Q.a,{item:!0,xs:!0,key:"needs_item_values_".concat(e.key),className:a.container},o.a.createElement(W.a,{variant:"caption",component:"p"},e.shortName),o.a.createElement("div",{className:a.chart},o.a.createElement("div",{className:a.background}),o.a.createElement("div",{className:a.bar,style:{backgroundColor:e.colour,width:(n=t[e.key],"".concat(n/5*100,"%"))}})));var n})))},K=Object(d.a)((function(e){return{itemImage:{width:"100%"},card:{backgroundColor:"#fff",margin:[[e.spacing(2),"auto"]]},untitled:{color:"#999"},editAction:{flexDirection:"row-reverse"}}})),ee=function(e){var t=e.item,a=K(),n=Object(h.f)();return o.a.createElement(u.a,{maxWidth:"sm"},o.a.createElement(X.a,{className:a.card,raised:!0},t.image&&o.a.createElement("img",{src:t.image,alt:"".concat(t.name),className:a.itemImage}),o.a.createElement(U.a,null,o.a.createElement(W.a,{gutterBottom:!0,variant:"subtitle1",component:"h3",className:t.name?"":a.untitled},t.name||"Untitled"),o.a.createElement($,{item:t})),o.a.createElement(P.a,{className:a.editAction},o.a.createElement(z.a,{size:"small",color:"primary",onClick:function(){var e;e=t.id,n.push("/edit/".concat(e))},startIcon:o.a.createElement(V.a,null)},"Edit"))))},te=Object(d.a)((function(e){return{previousButton:Object(A.a)({background:"rgba(255,255,255,0.7)",borderRadius:"50%",left:0,position:"absolute",top:"100px",zIndex:10},e.breakpoints.up("sm"),{top:"200px"}),nextButton:Object(A.a)({background:"rgba(255,255,255,0.7)",borderRadius:"50%",position:"absolute",right:0,top:"100px",zIndex:10},e.breakpoints.up("sm"),{top:"200px"}),buttonHide:{display:"none"},noCards:{alignItems:"center",display:"flex",flexBasis:"100%",height:"100%",justifyContent:"center",padding:[[0,e.spacing(2),e.spacing(4)]],textAlign:"center"}}})),ae=Object(D.virtualize)(M.a),ne=function(e){var t=e.items,a=e.itemIndex,r=te(),i=Object(n.useState)(a),c=Object(m.a)(i,2),l=c[0],s=c[1],u=Object(n.useState)(!1),d=Object(m.a)(u,2),p=d[0],h=d[1];return t.length?o.a.createElement("div",null,o.a.createElement(ae,{index:l,onChangeIndex:function(e){s(e)},enableMouseEvents:!0,disabled:t.length<=1,onSwitching:function(){h(!0)},onTransitionEnd:function(){h(!1)},slideRenderer:function(e){var a=e.key,n=e.index;return o.a.createElement(ee,{key:"card_".concat(a),item:t[Object(L.mod)(n,t.length)]})}}),t.length>1&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:p?r.buttonHide:r.previousButton},o.a.createElement(B.a,{"aria-label":"Previous",color:"primary",onClick:function(){s(l-1)}},o.a.createElement(Y.a,null))),o.a.createElement("div",{className:p?r.buttonHide:r.nextButton},o.a.createElement(B.a,{"aria-label":"Next",color:"primary",onClick:function(){s(l+1)}},o.a.createElement(_.a,null))))):o.a.createElement("div",{className:r.noCards},o.a.createElement(W.a,{variant:"body1",component:"p"},"Your Quality World images will be shown here as cards that you can swipe through..."))},oe=a(137),re=a.n(oe),ie=a(307),ce=a(308),le=a(135),se=a.n(le),me=a(136),ue=a.n(me),de=function(e){var t=e.navValue,a=e.navChangeHandler;return o.a.createElement(ie.a,{showLabels:!0,component:"nav",value:t},o.a.createElement(ce.a,{component:c.b,to:"/",label:"Home",value:"home",selected:"home"===t,icon:o.a.createElement(se.a,null),onClick:function(){return a("home")}}),o.a.createElement(ce.a,{component:c.b,to:"/cards",label:"Cards",value:"cards",selected:"cards"===t,icon:o.a.createElement(ue.a,null),onClick:function(){return a("cards")}}),o.a.createElement(ce.a,{component:c.b,to:"/map",label:"Map",value:"map",selected:"map"===t,icon:o.a.createElement(re.a,null),onClick:function(){return a("map")}}))},pe=a(309),he=Object(d.a)((function(e){return{container:{textAlign:"center"},divider:{margin:[[e.spacing(2),"auto"]],maxWidth:"300px"}}})),fe=function(){var e=he();return o.a.createElement("div",{className:e.container},o.a.createElement(W.a,{variant:"body1",component:"p",gutterBottom:!0},"Let's get started by adding some items to your quality world."),o.a.createElement(W.a,{variant:"body1",component:"p",gutterBottom:!0},"You can add as many as you like, but try and start with at least a few."),o.a.createElement(pe.a,{className:e.divider}),o.a.createElement(W.a,{variant:"body1",component:"p",gutterBottom:!0},"Click the big plus button in the bottom corner to add your first item."))},ge=a(322),be=a(310),ve=Object(d.a)((function(e){return{circleContainer:{position:"relative"},background:{color:e.palette.grey["light"===e.palette.type?200:700]},value:{animationDuration:"550ms",position:"absolute",left:0},valueCircle:{strokeLinecap:"round",color:function(e){return e.colour}},outerContainer:{display:"inline-flex"},label:{display:"block",fontSize:function(e){return"mini"===e.type?"0.6rem":"0.75rem"}}}})),ye=function(e){var t=e.value,a=e.label,n=(e.colour,e.type),r=e.hideValue,i=ve(e);return o.a.createElement(o.a.Fragment,null,o.a.createElement(ge.a,{position:"relative",className:i.outerContainer},o.a.createElement("div",{className:i.circleContainer},o.a.createElement(be.a,{variant:"static",value:100,size:"mini"===n?20:60,thickness:4,className:i.background}),o.a.createElement(be.a,{variant:"static",value:t,size:"mini"===n?20:60,thickness:4,className:i.value,classes:{circle:i.valueCircle}})),!r&&o.a.createElement(ge.a,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},o.a.createElement(W.a,{variant:"caption",component:"div",color:"textSecondary"},"".concat(Math.round(t),"%")))),a&&o.a.createElement(W.a,{variant:"caption",className:i.label},a))},Ee=function(e,t){var a=Object(l.a)(t);if(!a.length)return 0;var n=5*a.length*10,o=0;return a.forEach((function(t){o+=(t[e]||0)*t.level})),(o=Math.min(o/n*100,100))<0&&(o=0),o},we=Object(d.a)((function(e){return{container:Object(A.a)({display:"flex",flexDirection:"column",height:"calc(100% - ".concat(e.spacing(4),"px)"),margin:[[e.spacing(2),"auto"]],textAlign:"center"},e.breakpoints.up("sm"),{justifyContent:"center"}),needsContainer:{margin:[[e.spacing(2),"auto",0]]}}})),xe=function(e){var t=e.items,a=we();return o.a.createElement(u.a,{maxWidth:"md",className:a.container},o.a.createElement(W.a,{variant:"h4",component:"h2",gutterBottom:!0},"Welcome"),t.length?o.a.createElement(o.a.Fragment,null,o.a.createElement(W.a,{variant:"body1",component:"p",gutterBottom:!0},"You have",1===t.length?" 1 item ":" ".concat(t.length," items "),"in your quality world."),o.a.createElement(W.a,{variant:"body1",component:"p",gutterBottom:!0},"Here is an overview of how your quality world is meeting your needs."),o.a.createElement("div",{className:a.needsContainer},o.a.createElement(Q.a,{container:!0,spacing:3},J.map((function(e){return o.a.createElement(Q.a,{item:!0,xs:!0,key:"need_score_".concat(e.key)},o.a.createElement(ye,{value:Ee(e.key,t),label:e.name,colour:e.colour}))}))))):o.a.createElement(fe,null))},Oe=a(323),je=a(316),ke=a(317),Ce=a(138),Ne=a.n(Ce),Ie=a(312),Be=a(318),Se=a(314),We=a(315),He=a(313),qe=a(60),Ae=a.n(qe),Te=a(311),Me=Object(d.a)((function(e){return{dialogContent:Object(A.a)({margin:"0 auto",maxWidth:"700px"},e.breakpoints.up("md"),{marginTop:e.spacing(5)}),quote:{borderLeft:"5px solid #ccc",margin:[[e.spacing(2),0]],paddingLeft:e.spacing(2)},section:{flexDirection:"column"},content:{backgroundColor:"#f5f5f5"}}})),De=o.a.forwardRef((function(e,t){return o.a.createElement(Te.a,Object.assign({direction:"left",ref:t},e))})),Le=function(e){var t=e.isOpen,a=e.closeHandler,n=Me();return o.a.createElement(Ie.a,{fullScreen:!0,open:t,scroll:"paper","aria-labelledby":"dialog-title-help",TransitionComponent:De},o.a.createElement(He.a,{id:"dialog-title-help"},o.a.createElement(B.a,{edge:"start",color:"inherit",onClick:a,"aria-label":"close"},o.a.createElement(Ne.a,null)),"Help"),o.a.createElement(Se.a,{dividers:!0,className:n.content},o.a.createElement(We.a,{component:"div"},o.a.createElement("div",{className:n.dialogContent},o.a.createElement(Oe.a,null,o.a.createElement(je.a,{expandIcon:o.a.createElement(Ae.a,null),"aria-controls":"help-about"},o.a.createElement(W.a,{variant:"h6",component:"h3"},"What is a quality world?")),o.a.createElement(ke.a,{id:"help-about",className:n.section},o.a.createElement("blockquote",{className:n.quote},o.a.createElement(W.a,{variant:"body1",component:"p",gutterBottom:!0},'Dr. Glasser describes the Quality World as a "personal picture album" of all the people, things, ideas, and ideals that we have discovered increase the quality of our lives.'),o.a.createElement(W.a,{variant:"body2",component:"footer"},o.a.createElement("a",{href:"https://www.brucedavenport.com/quality-world.html",rel:"noopener noreferrer",target:"_blank"},"Bruce Davenport, An Introduction to Choice Theory"))),o.a.createElement(W.a,{variant:"body1",component:"p",gutterBottom:!0},"Visualising our own quality world helps us think the people, things and activities in our lives that we really value."),o.a.createElement(W.a,{variant:"body1",component:"p",gutterBottom:!0},"We can also think about how our quality world items help us meet our basic needs in life."))),o.a.createElement(Oe.a,null,o.a.createElement(je.a,{expandIcon:o.a.createElement(Ae.a,null),"aria-controls":"help-use",id:"about-header"},o.a.createElement(W.a,{variant:"h6",component:"h3"},"How do I use this tool?")),o.a.createElement(ke.a,{id:"help-use",className:n.section},o.a.createElement(W.a,{variant:"body1",component:"p",gutterBottom:!0},"Click the big plus button in the bottom right of the screen to add items to your quality world."),o.a.createElement(W.a,{variant:"body1",component:"p",gutterBottom:!0},"For each item you add, upload an image and then spend a moment indicating how that item helps you meet your basic needs."),o.a.createElement(W.a,{variant:"body1",component:"p",gutterBottom:!0},"You can then review your quality world items by flicking through them like cards or by using the map view."))),o.a.createElement(Oe.a,null,o.a.createElement(je.a,{expandIcon:o.a.createElement(Ae.a,null),"aria-controls":"help-use",id:"about-header"},o.a.createElement(W.a,{variant:"h6",component:"h3"},"What is the map view?")),o.a.createElement(ke.a,{id:"help-use",className:n.section},o.a.createElement(W.a,{variant:"body1",component:"p",gutterBottom:!0},"Your quality world is always changing. Sometimes we're not able to enjoy items in our quality world for various reasons. And some of our other quality world items might play a very big part in our lives right now."),o.a.createElement(W.a,{variant:"body1",component:"p",gutterBottom:!0},"The map view allows you to move items further away or close to you to reflect how big a part those items play in your life right now."),o.a.createElement(W.a,{variant:"body1",component:"p",gutterBottom:!0},"As you move items around on the map, you can see the effect they have on how your basic needs are being met."))),o.a.createElement(Oe.a,null,o.a.createElement(je.a,{expandIcon:o.a.createElement(Ae.a,null),"aria-controls":"help-use",id:"about-header"},o.a.createElement(W.a,{variant:"h6",component:"h3"},"Privacy")),o.a.createElement(ke.a,{id:"help-use",className:n.section},o.a.createElement(W.a,{variant:"body1",component:"p",gutterBottom:!0},"All the data you add to this tool is only stored on your device. It is not uploaded to the internet."),o.a.createElement(W.a,{variant:"body1",component:"p",gutterBottom:!0},"Only people who have access to your device will be able to see your quality world.")))))),o.a.createElement(Be.a,null,o.a.createElement(z.a,{onClick:a,color:"primary",autoFocus:!0,"data-testid":"close_button_text"},"Close")))},Re=a(53),Ye=a.n(Re),Fe=a(85),_e=a(143),ze=a(253),Xe=a(325),Pe=function(e){return new Promise((function(t,a){var n=new Image;n.addEventListener("load",(function(){return t(n)})),n.addEventListener("error",(function(e){return a(e)})),n.src=e}))};function Ue(e){return e*Math.PI/180}function Ge(e,t){return Ve.apply(this,arguments)}function Ve(){return(Ve=Object(Fe.a)(Ye.a.mark((function e(t,a){var n,o,r,i,c,l,s,m,u=arguments;return Ye.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>2&&void 0!==u[2]?u[2]:0,o=u.length>3?u[3]:void 0,e.next=4,Pe(t);case 4:if(r=e.sent,i=document.createElement("canvas"),c=i.getContext("2d"),l=2*Math.max(r.width,r.height),i.width=l,i.height=l,c.translate(l/2,l/2),c.rotate(Ue(n)),c.translate(-l/2,-l/2),c.drawImage(r,l/2-.5*r.width,l/2-.5*r.height),s=c.getImageData(0,0,l,l),i.width=a.width,i.height=a.height,c.putImageData(s,0-l/2+.5*r.width-a.x,0-l/2+.5*r.height-a.y),!o){e.next=26;break}return e.next=21,Pe(i.toDataURL("image/jpeg"));case 21:(m=e.sent).width=o.width,i.width=o.width,i.height=o.width*(1/o.aspect),c.drawImage(m,0,0,800,600);case 26:return e.abrupt("return",i.toDataURL("image/jpeg"));case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Qe=Object(d.a)((function(e){return Object(E.a)({fileInput:{display:"none"},upload:{marginTop:e.spacing(1)},uploadContainer:{display:"flex",flexDirection:"column",justifyContent:"space-between",margin:[[e.spacing(2),0]]},cropContainer:{backgroundColor:"#fff",flex:[[1,0,"220px"]],marginTop:e.spacing(1),position:"relative"},zoomControls:{padding:e.spacing(1)},actions:{padding:e.spacing(1)},loadingBackdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}})}));function Je(e){var t=e.saveHandler,a=Qe(),r=Object(n.useState)(),i=Object(m.a)(r,2),c=i[0],l=i[1],s=Object(n.useState)(),d=Object(m.a)(s,2),p=d[0],h=d[1],f=Object(n.useState)(!1),g=Object(m.a)(f,2),b=g[0],v=g[1],y=Object(n.useState)({x:0,y:0}),E=Object(m.a)(y,2),w=E[0],x=E[1],O=Object(n.useState)(1),j=Object(m.a)(O,2),k=j[0],C=j[1],N=Object(n.useCallback)((function(e,t){h(t)}),[]),I=function(){var e=Object(Fe.a)(Ye.a.mark((function e(){var a;return Ye.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.next=3,Ge(c,p,0,{width:800,aspect:4/3});case 3:a=e.sent,v(!1),t(a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.a.createElement(o.a.Fragment,null,o.a.createElement(u.a,{maxWidth:"sm"},o.a.createElement("div",{className:a.uploadContainer},!c&&o.a.createElement(o.a.Fragment,null,o.a.createElement(W.a,{variant:"body1",component:"p",gutterBottom:!0},"Select a photo to add to your quality world."),o.a.createElement("label",{htmlFor:"file_upload",className:a.upload},o.a.createElement(z.a,{variant:"contained",color:"primary",component:"span"},"Select Photo"),o.a.createElement("input",{accept:"image/*",className:a.fileInput,id:"file_upload",type:"file",onChange:function(e){var t=new FileReader,a=e.target.files[0];t.onload=function(e){l(e.target.result)},t.readAsDataURL(a)},encType:"multipart/form-data"}))),c&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,o.a.createElement(W.a,{variant:"body1",component:"p",gutterBottom:!0},"Now you can crop and move your photo so that it fits nicely in the box.")),o.a.createElement("div",{className:a.cropContainer},o.a.createElement(_e.a,{image:c,crop:w,zoom:k,aspect:4/3,onCropChange:x,onCropComplete:N,onZoomChange:C})),o.a.createElement("div",{className:a.zoomControls},o.a.createElement(Xe.a,{value:k,min:1,max:3,step:.1,"aria-labelledby":"Zoom",onChange:function(e,t){return C(t)}})),o.a.createElement("div",{className:a.actions},o.a.createElement(z.a,{variant:"contained",color:"primary",onClick:I},"Okay"),o.a.createElement(z.a,{onClick:function(){l(null)}},"Cancel"))))),o.a.createElement(ze.a,{className:a.loadingBackdrop,open:b},o.a.createElement(be.a,{color:"inherit"})))}var Ze=a(141),$e=a.n(Ze),Ke=a(140),et=a.n(Ke),tt=a(321),at=function(e){var t=e.deleteHandler,a=e.isOpen,n=e.closeHandler;return o.a.createElement(Ie.a,{maxWidth:"xs","aria-labelledby":"confirmation-delete-title",open:a,onClose:n},o.a.createElement(He.a,{id:"confirmation-delete-title"},"Delete this item?"),o.a.createElement(Se.a,{dividers:!0},o.a.createElement(W.a,{variant:"body2",component:"p",gutterBottom:!0},"Are you sure you want to remove this item from your quality world?"),o.a.createElement(W.a,{variant:"body2",component:"p"},"Deleting an item is permanent... But of course, you can always add it back in as a new item. You can do whatever you want. It is your quality world after all.")),o.a.createElement(Be.a,null,o.a.createElement(z.a,{autoFocus:!0,onClick:n,color:"primary"},"Cancel"),o.a.createElement(z.a,{onClick:t,color:"primary"},"Ok")))},nt=a(139),ot=a.n(nt),rt=Object(d.a)((function(){return{sliderGridItem:{display:"flex",alignItems:"center"}}})),it=function(e){var t=e.propertyName,a=e.label,n=e.currentValue,r=e.changeHandler,i=e.colour,c=e.description,l=rt();return o.a.createElement("div",{style:{marginTop:"1em",marginBottom:"1em"}},o.a.createElement(W.a,{id:"strength-".concat(t)},a),o.a.createElement(W.a,{variant:"caption"},c),o.a.createElement(Q.a,{container:!0,spacing:2},o.a.createElement(Q.a,{item:!0},o.a.createElement(B.a,{"aria-label":"Less",onClick:function(){n>0&&r(t,n-.1)},disabled:n<=0},o.a.createElement(ot.a,null))),o.a.createElement(Q.a,{item:!0,xs:!0,className:l.sliderGridItem},o.a.createElement(Xe.a,{value:n,min:0,max:5,step:.1,onChange:function(e,a){r(t,a)},style:{color:i},"aria-labelledby":"strength-".concat(t)})),o.a.createElement(Q.a,{item:!0},o.a.createElement(B.a,{"aria-label":"More",onClick:function(){n<5&&r(t,n+.1)},disabled:n>=5},o.a.createElement(O.a,null)))))},ct=Object(d.a)((function(e){return Object(E.a)({root:{"& > *":{margin:e.spacing(1)}},field:{width:"100%"},itemImage:{maxWidth:"100%"},container:Object(A.a)({marginBottom:e.spacing(3),marginTop:e.spacing(3),paddingBottom:e.spacing(3),paddingTop:e.spacing(3)},e.breakpoints.down("xs"),{marginBottom:0,marginTop:0,paddingBottom:e.spacing(2),paddingTop:e.spacing(2)}),imageGrid:{marginBottom:e.spacing(2)},actionDivider:{marginTop:e.spacing(2)},actionArea:{display:"flex",justifyContent:"space-between",marginTop:e.spacing(2)},deleteButton:{color:e.palette.error.dark}})})),lt=function(e){var t=e.saveHandler,a=e.deleteHandler,r=e.item,i=ct(),c=Object(h.f)(),l=Object(n.useState)(r),d=Object(m.a)(l,2),p=d[0],f=d[1],g=Object(n.useState)(!1),b=Object(m.a)(g,2),v=b[0],y=b[1],E=function(e,t){var a=Object(s.a)({},p);a[e]=t,f(a)};return Object(n.useEffect)((function(){f(r)}),[r]),o.a.createElement(u.a,{maxWidth:"sm",className:i.container},o.a.createElement(Q.a,{container:!0,spacing:2,className:i.imageGrid},o.a.createElement(Q.a,{item:!0,sm:4,xs:12},r.image&&o.a.createElement("img",{src:r.image,alt:"".concat(r.name),className:i.itemImage})),o.a.createElement(Q.a,{item:!0,sm:8,xs:12},o.a.createElement(tt.a,{label:"Item name",value:p.name,onChange:function(e){f(Object(s.a)(Object(s.a)({},p),{},{name:e.target.value}))},className:i.field,placeholder:"Untitled",variant:"outlined"}))),o.a.createElement(W.a,{variant:"body2",component:"p",gutterBottom:!0},"Use the sliders below to indicate how this quality world image satisfies your needs."),J.map((function(e){return o.a.createElement(it,{propertyName:e.key,label:e.name,currentValue:p[e.key],changeHandler:E,key:"slider_".concat(e.key),colour:e.colour,description:e.description})})),o.a.createElement(pe.a,{className:i.actionDivider}),o.a.createElement("div",{className:i.actionArea},o.a.createElement(z.a,{onClick:function(){t(p),c.push("/cards")},color:"primary",startIcon:o.a.createElement(et.a,null),variant:"contained"},"Save"),o.a.createElement(z.a,{size:"small",className:i.deleteButton,onClick:function(){y(!0)},startIcon:o.a.createElement($e.a,null)},"Delete")),o.a.createElement(at,{isOpen:v,deleteHandler:function(){a(r.id),c.push("/cards")},closeHandler:function(){y(!1)}}))};lt.defaultProps={item:{name:"",physiology:0,loveAndBelonging:0,power:0,fun:0,freedom:0,level:0,id:0}};var st=lt,mt=a(34),ut=function(){return{width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}},dt=function(){var e=Object(n.useState)(ut()),t=Object(m.a)(e,2),a=t[0],o=t[1];return Object(n.useEffect)((function(){var e=null,t=function(){clearTimeout(e),e=setTimeout((function(){return o(ut())}),300)};return window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}}),[]),a},pt=function(e){var t=e.numItems,a=Object(n.useState)(!1),r=Object(m.a)(a,2),i=r[0],c=r[1],l=function(){c(!1),localStorage.setItem("mqw_maps","true")};return Object(n.useEffect)((function(){c(!localStorage.getItem("mqw_maps"))}),[]),t?o.a.createElement(Ie.a,{maxWidth:"xs","aria-labelledby":"instructions-message",open:i,onClose:l},o.a.createElement(Se.a,null,o.a.createElement(W.a,{variant:"body2",component:"p",gutterBottom:!0},"Move items closer or further away from the centre depending on how big a part they are playing in your life right now."),o.a.createElement(W.a,{variant:"body2",component:"p"},"Tap on the centre icon to show or hide the needs satisfaction charts.")),o.a.createElement(Be.a,null,o.a.createElement(z.a,{onClick:l,color:"primary"},"Got it"))):null},ht=a(319),ft=Object(d.a)((function(e){return{container:{backgroundColor:"#fff",borderRadius:"5px",bottom:"calc(50% + 40px)",boxShadow:e.shadows[6],left:"calc(50% - 136px)",padding:"10px",position:"absolute",textAlign:"center",transform:"translateX(-50%)",width:"250px"},connector:{bottom:"-10px",display:"block",width:0,height:0,borderLeft:"10px solid transparent",borderRight:"10px solid transparent",borderTop:"10px solid #fff",left:"calc(50% - 10px)",position:"absolute"}}})),gt=function(e){var t=e.items,a=e.isShowing,n=ft();return o.a.createElement(ht.a,{appear:!0,in:a},o.a.createElement("div",{className:n.container},o.a.createElement(Q.a,{container:!0,spacing:1},J.map((function(e){return o.a.createElement(Q.a,{item:!0,xs:!0,key:"need_score_".concat(e.key)},o.a.createElement(ye,{value:Ee(e.key,t),colour:e.colour,type:"mini",label:e.shortName,hideValue:!0}))}))),o.a.createElement("div",{className:n.connector})))},bt=Object(d.a)((function(e){return{mapContainer:{display:"flex",height:"100%",width:"100%"},map:{position:"relative"},noItems:{left:0,padding:[[e.spacing(4),e.spacing(2),e.spacing(2)]],position:"absolute",right:0,textAlign:"center"}}})),vt=function(e){var t=e.items,a=e.handleSaveItem,r=bt(),i=Object(n.useRef)(),c=Object(n.useState)(!0),l=Object(m.a)(c,2),u=l[0],d=l[1],p=Object(n.useState)(!0),h=Object(m.a)(p,2),f=h[0],g=h[1],b=Object(n.useState)(300),v=Object(m.a)(b,2),y=v[0],E=v[1],w=Object(n.useState)(300),x=Object(m.a)(w,2),O=x[0],j=x[1],k=Object(n.useState)(1),C=Object(m.a)(k,2),N=C[0],I=C[1],B=Object(n.useState)(1),S=Object(m.a)(B,2),H=S[0],q=S[1],A=Object(n.useState)(1),T=Object(m.a)(A,2),M=T[0],D=T[1],L=dt(),R=function(e,t){var a=Math.abs(e),n=Math.abs(t),o=100*N,r=Math.sqrt(Math.pow(a,2)+Math.pow(n,2))*N-o,i=Math.sqrt(2*Math.pow(500,2))*N-2*o;return Math.min(10*(1-r/i),10)},Y=function(e){var t=e.x,a=e.y;return e.x-50*H<=0?t=50*H:e.x+50*H>=1e3*H&&(t=1e3*H-50*H),e.y-50*M<=0?a=50*M:e.y+50*M>=1e3*M&&(a=1e3*M-50*M),{x:t,y:a}},F=function(e,t){var n=Object(s.a)(Object(s.a)({},e),{},{posX:t.x,posY:t.y,level:R(t.x,t.y)});a(n)},_=function(){t.length&&d(!u)},z=function(e){u&&g(!e)},X=function(e){var t=document.createElement("img");t.src=e.image;var a=100*e.imageRatio*H,n=function(e){if(e.posX&&e.posY)return{x:e.posX,y:e.posY};var t=Math.random()*Math.PI*2,a={x:300*Math.cos(t),y:300*Math.sin(t)};return F(e,a),a}(e);return o.a.createElement(o.a.Fragment,{key:"map_item_".concat(e.id)},o.a.createElement(mt.Line,{stroke:"#ccc",strokeWidth:2,points:[0,0,n.x,n.y]}),o.a.createElement(mt.Rect,{cornerRadius:4,x:n.x,y:n.y,offset:{x:48,y:a/2-2},width:96,height:a-4,fill:"#ccc",scaleY:1/M}),o.a.createElement(mt.Group,{draggable:!0,dragBoundFunc:Y,onDragStart:function(e){!function(e){e.target.children[0].setAttrs({shadowOffset:{x:15,y:15}})}(e),z(!0)},onDragEnd:function(t){!function(e){e.target.children[0].to({duration:.2,shadowOffsetX:5,shadowOffsetY:5})}(t),F(e,{x:t.currentTarget.attrs.x,y:t.currentTarget.attrs.y}),z(!1)},x:n.x,y:n.y,offset:{x:50,y:a/2},width:100,height:a,scaleY:1/M},o.a.createElement(mt.Rect,{shadowColor:"black",shadowBlur:10,shadowOpacity:.3,width:98,height:a-2,fill:"#000",offset:{x:-1,y:-1}}),o.a.createElement(mt.Image,{image:t,width:100,height:a})))};return Object(n.useEffect)((function(){E(i.current.offsetHeight),j(i.current.offsetWidth),I(Math.min(i.current.offsetWidth/1e3,i.current.offsetHeight/1e3)),q(i.current.offsetWidth/1e3),D(i.current.offsetHeight/1e3)}),[L.width,L.height]),o.a.createElement("div",{className:r.mapContainer,ref:i},o.a.createElement(mt.Stage,{height:y,width:O,className:r.map,scaleX:H,scaleY:M},o.a.createElement(mt.Layer,{offsetX:-500,offsetY:-500},t.map((function(e){return X(e)}))),o.a.createElement(mt.Layer,{offsetX:-500,offsetY:-500},o.a.createElement(mt.Circle,{fill:"#fff",radius:100*N/2,x:0,y:0,shadowColor:"black",shadowBlur:10,shadowOpacity:.3,scaleX:1/H,scaleY:1/M}),o.a.createElement(mt.Circle,{fill:"#333",radius:100*N/6,x:0,y:-30*N,scaleX:1/H,scaleY:1/M}),o.a.createElement(mt.Rect,{cornerRadius:2,width:50*N,height:25*N,fill:"#333",scaleX:1/H,scaleY:1/M,x:0,y:10*N,offsetX:25*N}),o.a.createElement(mt.Circle,{fill:"transparent",radius:100*N/2,x:0,y:0,scaleX:1/H,scaleY:1/M,onMouseUp:_,onTap:_}))),o.a.createElement(pt,{numItems:t.length}),t.length?o.a.createElement(gt,{items:t,isShowing:u&&f}):o.a.createElement("div",{className:r.noItems},o.a.createElement(W.a,{variant:"body1",component:"p"},"Your Quality World images will be shown here as items that you can move around and organise...")))},yt=Object(d.a)((function(){return{appContainer:{display:"flex",flexDirection:"column",height:"100%",justifyContent:"space-between"},mainContainer:{flexBasis:"100%",overflowY:"auto",position:"relative"},loading:{color:y.palette.grey[500],left:0,position:"absolute",right:0,textAlign:"center",top:"30%"}}})),Et={name:"",image:null,physiology:0,loveAndBelonging:0,power:0,fun:0,freedom:0,level:5},wt=function(){var e=yt(),t=Object(n.useState)([]),a=Object(m.a)(t,2),r=a[0],i=a[1],c=Object(n.useState)(!1),d=Object(m.a)(c,2),f=d[0],g=d[1],v=Object(n.useState)(0),E=Object(m.a)(v,2),w=E[0],x=E[1],O=Object(n.useState)(""),j=Object(m.a)(O,2),C=j[0],N=j[1],I=Object(n.useState)(!1),B=Object(m.a)(I,2),S=B[0],W=B[1],H=Object(h.f)(),A=Object(h.g)(),T=function(e){var t=Object(l.a)(r),a=t.findIndex((function(t){return t.id===e.id}));t[a]=e,i(t),x(a),b.table("items").update(e.id,e)},M=function(e){var t=Object(l.a)(r),a=t.findIndex((function(t){return t.id===e}));t.splice(a,1),i(t),x(0),b.table("items").delete(e)},D=function(){var e=Object(h.h)().itemId,t=r.find((function(t){return t.id===parseInt(e,10)}));return t?o.a.createElement(st,{saveHandler:T,deleteHandler:M,item:t}):o.a.createElement("p",null,"That item does not exist...")};return Object(n.useEffect)((function(){var e=A.pathname.slice(1);g("info"===e)}),[A.pathname]),Object(n.useEffect)((function(){b.table("items").toArray().then((function(e){W(!0),i(e)}))}),[]),o.a.createElement(p.a,{theme:y},o.a.createElement("section",{className:e.appContainer},o.a.createElement(q,{openInfoHandler:function(){H.push("info"),g(!0)}}),o.a.createElement(u.a,{component:"main",className:e.mainContainer,maxWidth:!1,disableGutters:!0},S?o.a.createElement(h.c,null,o.a.createElement(h.a,{path:"/new"},o.a.createElement(Je,{saveHandler:function(e){var t=Object(s.a)(Object(s.a)({},Et),{},{image:e,imageRatio:3/4,name:""});b.table("items").add(t).then((function(e){i([].concat(Object(l.a)(r),[Object(s.a)(Object(s.a)({},t),{},{id:e})])),x(r.length),H.push("/edit/".concat(e))}))}})),o.a.createElement(h.a,{path:"/edit/:itemId"},o.a.createElement(D,null)),o.a.createElement(h.a,{path:"/map"},o.a.createElement(vt,{items:r,handleSaveItem:T}),o.a.createElement(k,null)),o.a.createElement(h.a,{path:"/cards"},o.a.createElement(ne,{items:r,itemIndex:w}),o.a.createElement(k,null)),o.a.createElement(h.a,{path:"/"},o.a.createElement(xe,{items:r}),o.a.createElement(k,null))):o.a.createElement("div",{className:e.loading},"Loading...")),o.a.createElement(de,{navValue:C,navChangeHandler:N}),o.a.createElement(Le,{isOpen:f,closeHandler:function(){H.push(""),g(!1)}})))},xt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ot(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(c.a,{hashType:"noslash"},o.a.createElement(wt,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/my-quality-world",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/my-quality-world","/service-worker.js");xt?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ot(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Ot(t,e)}))}}()}},[[160,1,2]]]);
//# sourceMappingURL=main.910737f9.chunk.js.map